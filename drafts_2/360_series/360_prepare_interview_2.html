<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://yoursite.com').hostname,
    root: '/',
    scheme: 'Gemini',
    version: '7.6.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="提醒amazon leadership principles1.dive deep (如项目中遇到的难点,困难) bug 哪怕很小 , 但凡遇到都可以说交流表达能力做事风格看你如何做决策 (差距就在这) 记得引申,引导到自己熟悉的领域,或者知道的知识点 自我介绍你好,我叫林聪聪,我从大四开学开始学习PHP , 并在学校附近找了一份实习 ,  在毕业后接触到了Laravel , 学习了一段时间后在家">
<meta property="og:type" content="website">
<meta property="og:title" content="Log0c">
<meta property="og:url" content="http:&#x2F;&#x2F;yoursite.com&#x2F;drafts_2&#x2F;360_series&#x2F;360_prepare_interview_2.html">
<meta property="og:site_name" content="Log0c">
<meta property="og:description" content="提醒amazon leadership principles1.dive deep (如项目中遇到的难点,困难) bug 哪怕很小 , 但凡遇到都可以说交流表达能力做事风格看你如何做决策 (差距就在这) 记得引申,引导到自己熟悉的领域,或者知道的知识点 自我介绍你好,我叫林聪聪,我从大四开学开始学习PHP , 并在学校附近找了一份实习 ,  在毕业后接触到了Laravel , 学习了一段时间后在家">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2020-10-09T03:01:10.112Z">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/drafts_2/360_series/360_prepare_interview_2">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: false,
    isPage: true,
    isArchive: false
  };
</script>

  <title> | Log0c
  </title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Log0c</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-posts">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Posts</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
  
  

          <div class="content">
            

  <div class="posts-expand">
    
    
    
    <div class="post-block" lang="en">
      <header class="post-header">

<h1 class="post-title" itemprop="name headline">
</h1>

<div class="post-meta">
  
  <ul class="breadcrumb">
          
            <li><a href="/drafts_2/">DRAFTS_2</a></li>
            <li><a href="/drafts_2/360_series/">360_SERIES</a></li>
            <li>360_PREPARE_INTERVIEW_2</li>
          
  </ul>

</div>

</header>

      
      
      
      <div class="post-body">
          <h1 id="提醒"><a href="#提醒" class="headerlink" title="提醒"></a>提醒</h1><p>amazon leadership principles<br>1.dive deep (如项目中遇到的难点,困难) bug 哪怕很小 , 但凡遇到都可以说<br>交流表达能力<br>做事风格<br>看你如何做决策 (差距就在这)</p>
<p>记得引申,引导到自己熟悉的领域,或者知道的知识点</p>
<h1 id="自我介绍"><a href="#自我介绍" class="headerlink" title="自我介绍"></a>自我介绍</h1><p>你好,我叫林聪聪,<br>我从大四开学开始学习PHP , 并在学校附近找了一份实习 ,  在毕业后接触到了Laravel , 学习了一段时间后在家附近找了一份Laravel的工作 , 后来辗转来到了深圳一直工作到现在,<br>在对计算机保持着热情的情况下,从今年3月份开始学习数据结构算法,7月开始学习一些开源组件的设计思想和底层执行原理,并发编程,网络编程 , 并学习了go和python并发编程相关的知识点</p>
<h2 id="延伸"><a href="#延伸" class="headerlink" title="延伸"></a>延伸</h2><p>对各种成熟项目的设计思想开始了吸收和应用 , 如在网络编程中经常提的 IO 多路复用,其实就是浏览器中的事件循环模型</p>
<h1 id="项目dive-deep"><a href="#项目dive-deep" class="headerlink" title="项目dive deep"></a>项目dive deep</h1><h2 id="可能要重新介绍项目和背景-也写好-可以参考第一次面试的说辞"><a href="#可能要重新介绍项目和背景-也写好-可以参考第一次面试的说辞" class="headerlink" title="可能要重新介绍项目和背景 , 也写好 , 可以参考第一次面试的说辞"></a>可能要重新介绍项目和背景 , 也写好 , 可以参考第一次面试的说辞</h2><p>背景写在硬核空间java面试里了</p>
<h2 id="通话记录表分库分表"><a href="#通话记录表分库分表" class="headerlink" title="通话记录表分库分表"></a>通话记录表分库分表</h2><blockquote>
<p>有可能还会问其他不停机分库分表的实现,搜一下<br>大表加字段也可以用这个方法 , 防止表锁</p>
</blockquote>
<p>5亿 每个表1亿 5个表</p>
<p>后面使用了同样的方式拆分了短信表</p>
<p>表的数据量大了起来了,CTO 让我做一下分表 , 在分表的时候我想到了之前在 redis 设计与实现书上的一个哈希表重新哈希(rehash)操作,可以不影响正常工作的情况下将数据迁移到一个扩容的哈希表中,<br>顺利地把这个策略应用在了分表上, 先把新增的数据同时写入旧表和分表中 , 然后写了一个命令,可以指定迁移的 id 范围, 把在这之前的数据慢慢的迁移到分表中 , 当迁移完毕后停止写入旧表 , 并且把查询都切到<br>新的分表去查询 , 确认完成后把旧表删除</p>
<h3 id="引申一"><a href="#引申一" class="headerlink" title="引申一"></a>引申一</h3><p>在这本书上我还学到了一些其他将来也可能用到的策略, 比如过期 key 的删除策略有三个, 和它们的优劣 (会过期的,比如订单)<br>定期删除 就是在某一个固定的时刻删除<br>定时删除 每隔一段周期进行删除<br>惰性删除 访问的时候才删除</p>
<h3 id="引申二"><a href="#引申二" class="headerlink" title="引申二"></a>引申二</h3><p>在分布式项目的日志上传中, 一开始使用的日志上传策略是达到了一定量的日志后才会上传 , 但是这会造成当日志很少的时候,一直都不会执行上传<br>读了 redis 书之后,我又参考了 redis 的持久化策略 , 可以设定多个条件上传 , 比如每 900 秒满 1 条的时候上传 , 600 秒满 30 条 , 300 秒满 100 条 , 解决了这个问题</p>
<h3 id="引申三"><a href="#引申三" class="headerlink" title="引申三"></a>引申三</h3><ul>
<li>问了处理过的表的数据量级，以及分表的策略<ul>
<li>然后追问了分表下的利弊</li>
<li>问了分表下不同查询维度如何实现，最终引导除了双向表，得出分表了一个弊端，即数据冗余</li>
<li>然后说优势，减少单个表的索引大学，加快查询速度，多个表也可以支持并发插入</li>
</ul>
</li>
</ul>
<h2 id="json大数溢出问题-BIG-INT-AS-STRING配置"><a href="#json大数溢出问题-BIG-INT-AS-STRING配置" class="headerlink" title="json大数溢出问题 , BIG_INT_AS_STRING配置"></a>json大数溢出问题 , BIG_INT_AS_STRING配置</h2><p>看了风雪之隅博客的一篇文章后了解到在数值超过最大值的时候,<br>PHP 底层会进行隐世类型转换 ,<br>将 long 类型的转换成 dval ,也就是 double 类型的浮点值进行存储 , 输出的时候是科学计数法的形式<br>这种情况下有可能产生精度丢失</p>
<h2 id="和第三方对接接口-json数据里传了个很长的浮点数-经纬度-双方的php配置文件中对-浮点数输出长度定义不一致-导致签名失败-后转成字符串处理"><a href="#和第三方对接接口-json数据里传了个很长的浮点数-经纬度-双方的php配置文件中对-浮点数输出长度定义不一致-导致签名失败-后转成字符串处理" class="headerlink" title="和第三方对接接口 , json数据里传了个很长的浮点数(经纬度) , 双方的php配置文件中对 浮点数输出长度定义不一致 , 导致签名失败 , 后转成字符串处理"></a>和第三方对接接口 , json数据里传了个很长的浮点数(经纬度) , 双方的php配置文件中对 浮点数输出长度定义不一致 , 导致签名失败 , 后转成字符串处理</h2><h2 id="批量上传图片到oss的接口很慢-tcpdump-wireshark分析-抓包发现DNS耗时长-fopen每次都要重新查询dns-换用了guzzle-http库来连接"><a href="#批量上传图片到oss的接口很慢-tcpdump-wireshark分析-抓包发现DNS耗时长-fopen每次都要重新查询dns-换用了guzzle-http库来连接" class="headerlink" title="批量上传图片到oss的接口很慢, (tcpdump+wireshark分析)抓包发现DNS耗时长, fopen每次都要重新查询dns , 换用了guzzle http库来连接"></a>批量上传图片到oss的接口很慢, (tcpdump+wireshark分析)抓包发现DNS耗时长, fopen每次都要重新查询dns , 换用了guzzle http库来连接</h2><p>fopen 是没有进行 DNS 缓存的 , curl 可以缓存 dns , guzzle 库也可以<br>(可以提一下有看过一些网络编程模型? RPC?)<br>xdebug profiler 分析的过程也讲一下 </p>
<h2 id="一个可以改善的功能-这不是亮点"><a href="#一个可以改善的功能-这不是亮点" class="headerlink" title="一个可以改善的功能(这不是亮点)"></a>一个可以改善的功能(这不是亮点)</h2><p>做过一个需求, 背景是有一个贷款平台将要关闭,因此用户在该平台申请的订单会转移到新的平台,<br>冻结原平台的单子,并提醒用户到新平台继续流程,当时的做法是直接使用 http 请求将用户数据和<br>订单复制到新平台, 然后旧平台根据返回的状态码判断是否成功,成功则冻结</p>
<p>后来在学习分布式事务的时候了解到,这里一但发生网络错误(比如执行太久了,nginx 超时返回 500,实际执行完毕了),原子性得不到保证,<br>就有可能造成两笔订单同时存在的 bug, 当然其实大多数情况下不会发生 , </p>
<p>改进的方法是使用两阶段提交协议, 有一个 leader 负责发出</p>
<h2 id="为了保证强一致性-在填资料的接口会-xxx-不是亮点"><a href="#为了保证强一致性-在填资料的接口会-xxx-不是亮点" class="headerlink" title="为了保证强一致性,在填资料的接口会 xxx (不是亮点)"></a>为了保证强一致性,在填资料的接口会 xxx (不是亮点)</h2><p>和一个平台合并过, 这个平台进来的用户,会将数据同步迁移到新平台,并将历史贷款纳入分析</p>
<h1 id="go项目"><a href="#go项目" class="headerlink" title="go项目"></a>go项目</h1><p>参考tools_usage就行了</p>
<h1 id="最近在学什么"><a href="#最近在学什么" class="headerlink" title="最近在学什么"></a>最近在学什么</h1><p>自我介绍的时候说了</p>
<h1 id="end"><a href="#end" class="headerlink" title="end"></a>end</h1><p>准备完毕, 坐等面试官提问题 (技术类)</p>
<h1 id="why-resign"><a href="#why-resign" class="headerlink" title="why resign"></a>why resign</h1><p>保持学习,尽可能不成为1年经验用10年的人</p>

      </div>
      
      
      
    </div>
    
  <ul class="breadcrumb">
          
            <li><a href="/drafts_2/">DRAFTS_2</a></li>
            <li><a href="/drafts_2/360_series/">360_SERIES</a></li>
            <li>360_PREPARE_INTERVIEW_2</li>
          
  </ul>

    
    
    
  </div>


          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#提醒"><span class="nav-number">1.</span> <span class="nav-text">提醒</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#自我介绍"><span class="nav-number">2.</span> <span class="nav-text">自我介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#延伸"><span class="nav-number">2.1.</span> <span class="nav-text">延伸</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#项目dive-deep"><span class="nav-number">3.</span> <span class="nav-text">项目dive deep</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#可能要重新介绍项目和背景-也写好-可以参考第一次面试的说辞"><span class="nav-number">3.1.</span> <span class="nav-text">可能要重新介绍项目和背景 , 也写好 , 可以参考第一次面试的说辞</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#通话记录表分库分表"><span class="nav-number">3.2.</span> <span class="nav-text">通话记录表分库分表</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#引申一"><span class="nav-number">3.2.1.</span> <span class="nav-text">引申一</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#引申二"><span class="nav-number">3.2.2.</span> <span class="nav-text">引申二</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#引申三"><span class="nav-number">3.2.3.</span> <span class="nav-text">引申三</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#json大数溢出问题-BIG-INT-AS-STRING配置"><span class="nav-number">3.3.</span> <span class="nav-text">json大数溢出问题 , BIG_INT_AS_STRING配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#和第三方对接接口-json数据里传了个很长的浮点数-经纬度-双方的php配置文件中对-浮点数输出长度定义不一致-导致签名失败-后转成字符串处理"><span class="nav-number">3.4.</span> <span class="nav-text">和第三方对接接口 , json数据里传了个很长的浮点数(经纬度) , 双方的php配置文件中对 浮点数输出长度定义不一致 , 导致签名失败 , 后转成字符串处理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#批量上传图片到oss的接口很慢-tcpdump-wireshark分析-抓包发现DNS耗时长-fopen每次都要重新查询dns-换用了guzzle-http库来连接"><span class="nav-number">3.5.</span> <span class="nav-text">批量上传图片到oss的接口很慢, (tcpdump+wireshark分析)抓包发现DNS耗时长, fopen每次都要重新查询dns , 换用了guzzle http库来连接</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#一个可以改善的功能-这不是亮点"><span class="nav-number">3.6.</span> <span class="nav-text">一个可以改善的功能(这不是亮点)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#为了保证强一致性-在填资料的接口会-xxx-不是亮点"><span class="nav-number">3.7.</span> <span class="nav-text">为了保证强一致性,在填资料的接口会 xxx (不是亮点)</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#go项目"><span class="nav-number">4.</span> <span class="nav-text">go项目</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#最近在学什么"><span class="nav-number">5.</span> <span class="nav-text">最近在学什么</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#end"><span class="nav-number">6.</span> <span class="nav-text">end</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#why-resign"><span class="nav-number">7.</span> <span class="nav-text">why resign</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name"></p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">38</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/carlclone" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;carlclone" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://leetcode.com/carlclone" title="LeetCode → https:&#x2F;&#x2F;leetcode.com&#x2F;carlclone" rel="noopener" target="_blank"><i class="fa fa-fw fa-code"></i>LeetCode</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://learnku.com/blog/carlclone" title="LaravelChina → https:&#x2F;&#x2F;learnku.com&#x2F;blog&#x2F;carlclone" rel="noopener" target="_blank"><i class="fa fa-fw fa-instagram"></i>LaravelChina</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.jianshu.com/u/baea2de7cc1a" title="Jianshu → https:&#x2F;&#x2F;www.jianshu.com&#x2F;u&#x2F;baea2de7cc1a" rel="noopener" target="_blank"><i class="fa fa-fw fa-instagram"></i>Jianshu</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder"></span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v4.0.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.6.0
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/pisces.js"></script>
<script src="/js/next-boot.js"></script>



  















  

  

</body>
</html>
